<!DOCTYPE html>
<html>
<head>
        <link rel="stylesheet" type="text/css" href="stylesheets/houses.css">
        <title>Vote!</title>
        <link rel="icon" href="images/san-x.png">
        <div class='heading'>            
            <li><a href="https://user.tjhsst.edu/2021lyang/" >Homepage</a></li>
            <li><a href="https://user.tjhsst.edu/2021lyang/weatherform">Weather</a></li>
            <li><a href="https://user.tjhsst.edu/2021lyang/funform" >Boba!</a></li>
            <li><a href="https://user.tjhsst.edu/2021lyang/voting_form">Vote !</a></li>
            <li><a href="https://user.tjhsst.edu/2021lyang/map" >Map!</a></li>
            <li><a href="https://user.tjhsst.edu/2021lyang/addpoints" >Add!</a></li>
            <li><a href="https://user.tjhsst.edu/2021lyang/cookie" >SURPRISE!</a></li>
        </div>
</head>

<body class="background">
     <div class ="content">
         <form id="the_form" name ="the_form">
            Select Student:
            <select id = 'viewBy' class = "list">
                <option  name = 'option' value = 'brown'>Brown</option>
                <option name = 'option' value = 'apeach'>Apeach</option>
                <option name = 'option' value = 'tokage'>Tokage</option>
                <option name = 'option' value = 'cinnamoroll'>Cinnamoroll</option>
                <option name = 'option' value = 'hello kitty'>Hello Kitty</option>
                <option name = 'option' value = 'ryan'>Ryan</option>
                <option name = 'option' value = 'sally'>Sally</option>
                <option name = 'option' value = 'ebi'>Ebi</option>
            </select><br><br>
        </form>
            <button type="button" onclick="fetchFromServer()"> View! </button>
            <p id="results"></p>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script>
        function fetchFromServer() {
        console.log('hello');
        console.log(document.getElementById('viewBy').value);
        var ajax_params = {
            'url'     : "houseworker2",
            'type'    : "get",
            'data'    : {"who":document.getElementById('viewBy').value },
            'success' : onServerResponse
        }
        
        $.ajax( ajax_params )
    }
    function onServerResponse (responseText) {
        console.log(responseText);
        document.getElementById('results').innerHTML = (responseText);
    }
    </script>
</body>
</html>